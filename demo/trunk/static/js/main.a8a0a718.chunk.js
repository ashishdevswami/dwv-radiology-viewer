(this["webpackJsonpdwv-react"]=this["webpackJsonpdwv-react"]||[]).push([[0],{162:function(e,t,a){e.exports=a(389)},167:function(e,t,a){},168:function(e,t,a){},326:function(e,t,a){},346:function(e,t){},348:function(e,t){},389:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(16),r=a.n(o),i=(a(167),a(161)),l=a.n(i),d=a(20),c=a(80),h=a.n(c),p=a(81),m=a.n(p),g=(a(168),a(34)),u=a.n(g),v=a(58),w=a.n(v),E=a(154),f=a.n(E),b=a(156),C=a.n(b),D=a(82),N=a.n(D),y=a(160),P=a.n(y),x=a(155),L=a.n(x),S=a(84),T=a.n(S),k=a(159),A=a.n(k),M=a(157),j=a.n(M),O=a(158),B=a.n(O),R=a(153),I=a.n(R),W=a(83),z=a.n(W),H=a(147),F=a.n(H),V=a(145),J=a.n(V),U=a(148),Z=a.n(U),K=a(149),Q=a.n(K),$=a(151),q=a.n($),G=a(35),X=a.n(G),Y=a(150),_=a.n(Y),ee=a(85),te=a.n(ee),ae=a(152),se=a.n(ae);class ne extends n.a.Component{constructor(e){super(e),this.handleChangePage=(e,t)=>{this.setState({page:t})},this.handleChangeRowsPerPage=e=>{this.setState({rowsPerPage:e.target.value})},this.state={data:this.props.data,displayData:this.props.data,searchfor:"",page:0,rowsPerPage:10},this.filterList=this.filterList.bind(this)}componentWillReceiveProps(e){this.setState({data:e.data,displayData:e.data})}filterList(e){var t=e.target.value,a=t.toLowerCase(),s=this.state.data.filter((function(e){for(var t in e)if(e.hasOwnProperty(t)){var s=e[t];if("string"!==typeof s&&(s=s.toString()),-1!==s.toLowerCase().indexOf(a))return!0}return!1}));this.setState({searchfor:t,displayData:s})}render(){const e=this.props.classes,t=this.state,a=t.displayData,s=t.searchfor,o=t.rowsPerPage,r=t.page;return n.a.createElement("div",{className:e.container},n.a.createElement(J.a,{id:"search",type:"search",value:s,className:e.searchField,onChange:this.filterList,margin:"normal",InputProps:{startAdornment:n.a.createElement(F.a,{position:"start"},n.a.createElement(Z.a,null))}}),n.a.createElement(Q.a,{className:e.table},n.a.createElement(_.a,null,n.a.createElement(te.a,null,n.a.createElement(X.a,null,"Tag"),n.a.createElement(X.a,null,"Value"))),n.a.createElement(q.a,null,a.slice(r*o,r*o+o).map(t=>n.a.createElement(te.a,{className:e.row,key:t.group+t.element},n.a.createElement(X.a,null,t.name),n.a.createElement(X.a,null,t.value.toString()))))),n.a.createElement(se.a,{component:"div",count:a.length,rowsPerPage:o,page:r,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}var oe=Object(d.withStyles)(e=>({flex:{flex:1},spacer:{flex:"1 1 100%"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},searchField:{backgroundColor:"white",marginLeft:20}}))(ne),re=(a(326),a(24)),ie=a.n(re);ie.a.gui.getElement=ie.a.gui.base.getElement,ie.a.image.decoderScripts={jpeg2000:"assets/dwv/decoders/pdfjs/decode-jpeg2000.js","jpeg-lossless":"assets/dwv/decoders/rii-mango/decode-jpegloss.js","jpeg-baseline":"assets/dwv/decoders/pdfjs/decode-jpegbaseline.js",rle:"assets/dwv/decoders/dwv/decode-rle.js"};function le(e){return n.a.createElement(I.a,Object.assign({direction:"up"},e))}class de extends n.a.Component{constructor(e){super(e),this.onChangeTool=e=>{this.state.dwvApp&&(this.setState({selectedTool:e}),this.state.dwvApp.setTool(e),"Draw"===e&&this.onChangeShape(this.state.tools.Draw.options[0]))},this.onChangeShape=e=>{this.state.dwvApp&&this.state.dwvApp.setDrawShape(e)},this.onReset=e=>{this.state.dwvApp&&this.state.dwvApp.resetDisplay()},this.handleTagsDialogOpen=()=>{this.setState({showDicomTags:!0})},this.handleTagsDialogClose=()=>{this.setState({showDicomTags:!1})},this.handleMenuButtonClick=e=>{this.setState({toolMenuAnchorEl:e.currentTarget})},this.handleMenuClose=e=>{this.setState({toolMenuAnchorEl:null})},this.handleMenuItemClick=e=>{this.setState({toolMenuAnchorEl:null}),this.onChangeTool(e)},this.setupDropbox=e=>{const t=e.getElement("layerContainer");t&&(this.showDropbox(e,!0),t.addEventListener("dragover",this.onDragOver),t.addEventListener("dragleave",this.onDragLeave),t.addEventListener("drop",this.onDrop))},this.onDragOver=e=>{e.stopPropagation(),e.preventDefault();const t=this.state.dwvApp.getElement(this.state.borderClassName);t&&-1===t.className.indexOf(this.state.hoverClassName)&&(t.className+=" "+this.state.hoverClassName)},this.onDragLeave=e=>{e.stopPropagation(),e.preventDefault();const t=this.state.dwvApp.getElement(this.borderClassName+" hover");t&&-1!==t.className.indexOf(this.state.hoverClassName)&&(t.className=t.className.replace(" "+this.state.hoverClassName,""))},this.showDropbox=(e,t)=>{const a=e.getElement(this.state.dropboxClassName);if(a)if(t){a.className=this.state.dropboxClassName+" "+this.state.borderClassName,""===a.innerHTML&&(a.innerHTML="Drag and drop data here.");const t=2*e.getLayerContainerSize().height/3;a.setAttribute("style","width:"+t+"px;height:"+t+"px")}else a.className=this.state.dropboxClassName,a.innerHTML="",a.setAttribute("style","visible:false;")},this.onDrop=e=>{e.stopPropagation(),e.preventDefault(),this.state.dwvApp.loadFiles(e.dataTransfer.files)},this.state={versions:{dwv:ie.a.getVersion(),react:n.a.version},tools:{Scroll:{},ZoomAndPan:{},WindowLevel:{},Draw:{options:["Ruler"],type:"factory",events:["draw-create","draw-change","draw-move","draw-delete"]}},selectedTool:"Select Tool",loadProgress:0,dataLoaded:!1,dwvApp:null,metaData:[],showDicomTags:!1,toolMenuAnchorEl:null,dropboxClassName:"dropBox",borderClassName:"dropBoxBorder",hoverClassName:"hover"}}render(){const e=this.props.classes,t=this.state,a=t.versions,s=t.tools,o=t.loadProgress,r=t.dataLoaded,i=t.metaData,l=t.toolMenuAnchorEl,d=Object.keys(s).map(e=>n.a.createElement(N.a,{onClick:this.handleMenuItemClick.bind(this,e),key:e,value:e},e));return n.a.createElement("div",{id:"dwv"},n.a.createElement(f.a,{variant:"determinate",value:o}),n.a.createElement("div",{className:"button-row"},n.a.createElement(w.a,{variant:"contained",color:"primary","aria-owns":l?"simple-menu":null,"aria-haspopup":"true",onClick:this.handleMenuButtonClick,disabled:!r,className:e.button,size:"medium"},this.state.selectedTool,n.a.createElement(L.a,{className:e.iconSmall})),n.a.createElement(C.a,{id:"simple-menu",anchorEl:l,open:Boolean(l),onClose:this.handleMenuClose},d),n.a.createElement(w.a,{variant:"contained",color:"primary",disabled:!r,onClick:this.onReset},"Reset"),n.a.createElement(w.a,{variant:"contained",color:"primary",onClick:this.handleTagsDialogOpen,disabled:!r,className:e.button,size:"medium"},"Tags"),n.a.createElement(j.a,{open:this.state.showDicomTags,onClose:this.handleTagsDialogClose,TransitionComponent:le,classes:{paper:e.tagsDialog}},n.a.createElement(B.a,{className:e.appBar},n.a.createElement(z.a,null,n.a.createElement(T.a,{color:"inherit",onClick:this.handleTagsDialogClose,"aria-label":"Close"},n.a.createElement(A.a,null)),n.a.createElement(u.a,{variant:"h6",color:"inherit",className:e.flex},"DICOM Tags"))),n.a.createElement(oe,{data:i}))),n.a.createElement("div",{className:"layerContainer"},n.a.createElement("div",{className:"dropBox"}),n.a.createElement("canvas",{className:"imageLayer"},"Only for HTML5 compatible browsers..."),n.a.createElement("div",{className:"drawDiv"})),n.a.createElement("div",null,n.a.createElement("p",{className:"legend"},n.a.createElement(u.a,{variant:"caption"},"Powered by ",n.a.createElement(P.a,{href:"https://github.com/ivmartel/dwv",title:"dwv on github"},"dwv")," ",a.dwv," and React ",a.react))))}componentDidMount(){var e=new ie.a.App;e.init({containerDivId:"dwv",tools:this.state.tools});let t=null,a=null,s=null;e.addEventListener("load-start",()=>{t=0,a=0,s=0,this.showDropbox(e,!1)}),e.addEventListener("load-progress",e=>{this.setState({loadProgress:e.loaded})}),e.addEventListener("load",()=>{this.setState({metaData:ie.a.utils.objectToArray(e.getMetaData())});let t="Scroll";e.isMonoSliceData()&&1===e.getImage().getNumberOfFrames()&&(t="ZoomAndPan"),this.onChangeTool(t),this.setState({dataLoaded:!0})}),e.addEventListener("load-end",()=>{a&&(this.setState({loadProgress:0}),alert("Received errors during load. Check log for details."),t||this.showDropbox(e,!0)),s&&(this.setState({loadProgress:0}),alert("Load was aborted."),this.showDropbox(e,!0))}),e.addEventListener("load-item",()=>{++t}),e.addEventListener("error",e=>{console.error(e.error),++a}),e.addEventListener("abort",()=>{++s}),e.addEventListener("keydown",t=>{e.defaultOnKeydown(t)}),window.addEventListener("resize",e.onResize),this.setState({dwvApp:e}),this.setupDropbox(e),ie.a.utils.loadFromUri(window.location.href,e)}}var ce=Object(d.withStyles)(e=>({button:{margin:e.spacing.unit},appBar:{position:"relative"},title:{flex:"0 0 auto"},tagsDialog:{minHeight:"90vh",maxHeight:"90vh",minWidth:"90vw",maxWidth:"90vw"},iconSmall:{fontSize:20}}))(de);const he=Object(d.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:h.a,secondary:m.a,type:"light"}});class pe extends s.Component{render(){return n.a.createElement(d.MuiThemeProvider,{theme:he},n.a.createElement(l.a,null),n.a.createElement("div",{className:"App"},n.a.createElement(ce,null)))}}var me=pe;const ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}r.a.render(n.a.createElement(me,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/dwv-react/demo/trunk",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/dwv-react/demo/trunk","/service-worker.js");ge?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ue(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ue(e)})}}()}},[[162,1,2]]]);
//# sourceMappingURL=main.a8a0a718.chunk.js.map